(function($){jshop.module.UserDefine={};$.extend(jshop.module.UserDefine,jshop.module);$.extend(jshop.module.UserDefine,{sideSlip:function(args){var imgs=$(this).find("img");imgs.each(function(index,n){$(n).attr("src",$(n).attr("original"));$(n).removeAttr("original");$(n).removeClass("J_imgLazyload");});if(args==undefined){if(validateData($(this).attr("module-param"))){var args=eval("("+$(this).attr("module-param")+")");}}var _this=this,param=$.extend({vertical:"top",verticalValue:170,horizontal:"left",horizontalValue:0,zindex:10},args),vertical=param.vertical,verticalValue=param.verticalValue,horizontal=param.horizontal,horizontalValue=param.horizontalValue,zindex=param.zindex;var count=0;for(var i in param){count++;}if(count==5&&vertical=="top"&&verticalValue>=170&&horizontal=="right"){setInterval(function(){verticalValue+=(getTop()+param.verticalValue-verticalValue)/20;$(_this).css({"position":"absolute","top":verticalValue,"right":horizontalValue,"zIndex":zindex});},20);}if(count==5&&vertical=="top"&&verticalValue>=170&&horizontal=="left"){setInterval(function(){verticalValue+=(getTop()+param.verticalValue-verticalValue)/20;$(_this).css({"position":"absolute","top":verticalValue,"left":horizontalValue,"zIndex":zindex});},20);}if(count==5&&vertical=="bottom"&&horizontal=="right"){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20;$(_this).css({"position":"absolute","top":a,"right":horizontalValue,"zIndex":zindex});},20);}if(count==5&&vertical=="bottom"&&horizontal=="left"){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20;$(_this).css({"position":"absolute","top":a,"left":horizontalValue,"zIndex":zindex});},20);}if(count==5&&vertical=="bottom"&&horizontal=="middle"){var a=$(window).height()-$(_this).height()-param.verticalValue,b=a;setInterval(function(){a+=(getTop()+b-a)/20;$(_this).css({"position":"absolute","top":a,"left":horizontalValue,"margin-left":-($(_this).width()/2),"zIndex":zindex});
},20);}function getTop(){return(document.documentElement.scrollTop||document.body.scrollTop||0)-(document.documentElement.clientTop||document.body.clientTop||0);}},addFavorite:function(args){if(args==undefined){if(validateData($(this).attr("module-param"))){var args=eval("("+$(this).attr("module-param")+")");}}var _this=this,param=$.extend({title:"京东商城",url:"http://www.jd.com"},args),title=param.title,url=param.url;$(_this).css("cursor","pointer");$(_this).click(function(e){if(document.all){window.external.AddFavorite(url,title);}else{if(window.sidebar){window.sidebar.addPanel(title,url,"");}else{alert("对不起，您的浏览器不支持此操作!\n请您使用菜单栏或Ctrl+D收藏本站。");}}});},autoCenter:function(args){var _this=$(this),param=$.extend({autoMiddleNode:".userDefinedArea"},args||{}),node=_this.find(param.autoMiddleNode);alignCenter();$(window).resize(function(){alignCenter();});function alignCenter(){var extra=node.width()-_this.width();if(extra>0){node.css({"margin-left":-extra/2});}else{node.css("margin","0 auto");}}}});})(jQuery);
(function($){jshop.module.imgShow={};$.extend(jshop.module.imgShow,jshop.module);$.extend(jshop.module.imgShow,{showImg:function(args){var silde=true;var param=$.extend({timer:0,node:"li",nodeChild:".jItem",imgNodeArea:".jPic",imgNode:".jPic a",defaultClass:"current",slideDirection:"left",subFunction:"moveEffect"},args),_this=this,imgArea=$(_this).find(param.node),nodeChild=$(_this).find(param.nodeChild),defaultClass=param.defaultClass,currentNode=imgArea.eq(0).find(param.imgNode),_duration=parseInt(parseFloat(param.timer||0)*1000);if(!imgArea.length){return;}var index=0,moveRange=0,partTime=null,animate=null;var isTop=(param.slideDirection=="top")?true:false;var enterFlag=[],count=0;var banner={transparentEffect:function(){init();animate=transparent;_event();},moveEffect:function(){imgArea.each(function(i,n){var imgNodeArea=$(n).find(param.imgNodeArea);if(isTop){imgNodeArea.css({height:100000});imgNodeArea.children().css({width:imgNodeArea.width(),height:"auto","float":"none",display:"block"});}else{imgNodeArea.css({width:100000});imgNodeArea.children().css({width:imgNodeArea.find("img").width(),height:"100%","float":"left",display:"block"});}});init();animate=oneImgMove;_event();}};jshop.module.ridLazy(_this);if(banner[param.subFunction]){banner[param.subFunction].call(_this);}function init(){imgArea.css({width:currentNode.find("img").width(),height:currentNode.find("img").height()});nodeChild.css({width:currentNode.find("img").width(),height:currentNode.find("img").height()});}function _event(){imgArea.each(function(index,n){var _ele=$(n);_ele.data("index",0);_ele.data("count",0);_ele.data("animating",false);_ele.data("direction",1);_ele.bind({mouseenter:function(){var _this=this,_area=$(this),_count=_area.data("count")+1,_node=_area.find(param.imgNode);_area.data("count",_count),currentNode=_area.find(param.imgNode);if(!_area.data("animating")){_area.data("direction",1);_area.data("index",1);currentNode.removeClass(defaultClass).eq(1).addClass(defaultClass);animate.call(_this);
}},mouseleave:function(){var _this=this,_area=$(this),_count=_area.data("count")+1,_node=_area.find(param.imgNode);_area.data("count",_count),currentNode=_area.find(param.imgNode);if(!_area.data("animating")){_area.data("direction",2);_area.data("index",0);currentNode.removeClass(defaultClass).eq(0).addClass(defaultClass);animate.call(_this);}}});});}function transparent(){var _this=this,_area=$(_this),_index=_area.data("index");_currentnode=_area.find(param.imgNode);_area.data("animating",true);_currentnode.animate({opacity:0},0,function(){});_currentnode.eq(_index).animate({opacity:1},_duration,function(){_area.data("animating",false);var _count=_area.data("count"),_direction=_area.data("direction");if(_direction==1){if(_count%2==0){_area.data("direction",2);_area.data("index",0);_area.find(param.imgNode).removeClass(defaultClass).eq(0).addClass(defaultClass);animate.call(_this);}}else{if(_count%2==1){_area.data("direction",1);_area.data("index",1);_area.find(param.imgNode).removeClass(defaultClass).eq(1).addClass(defaultClass);animate.call(_this);}}});}function oneImgMove(){var _this=this,_area=$(_this),_css={},_index=_area.data("index");_area.data("animating",true);if(isTop){_css.marginTop=-_index*_area.find(param.imgNode).height()+"px";}else{_css.marginLeft=-_index*_area.find(param.imgNode).width()+"px";}_area.find(param.imgNodeArea).animate(_css,_duration,function(){_area.data("animating",false);var _count=_area.data("count"),_direction=_area.data("direction");if(_direction==1){if(_count%2==0){_area.data("direction",2);_area.data("index",0);_area.find(param.imgNode).removeClass(defaultClass).eq(0).addClass(defaultClass);animate.call(_this);}}else{if(_count%2==1){_area.data("direction",1);_area.data("index",1);_area.find(param.imgNode).removeClass(defaultClass).eq(1).addClass(defaultClass);animate.call(_this);}}});}},autoLayout:function(args){if(args==undefined){if(validateData($(this).attr("module-param"))){var args=eval("("+$(this).attr("module-param")+")");}}var param=$.extend({node:"li",extra:{}},args),_this=this,elems=$(_this).find(param.node),elem=elems.eq(0);
elem.css(param.extra);var outerWidth=parseInt(elem.data("outerWidth")||elem.outerWidth(true)),width=parseInt(elem.data("width")||elem.css("width")),qty=parseInt(elem.parent().parent().width()/outerWidth);elem.data({"outerWidth":outerWidth,"width":width});var extraWidth=outerWidth-width;var newWidth=(elem.parent().parent().width()-extraWidth*qty)/qty-0.1;elems.css({width:newWidth});},autoImgShow:function(){if(validateData($(this).attr("module-param"))){var args=eval("("+$(this).attr("module-param")+")");}var param=$.extend({},args);jshop.module.imgShow.showImg.call(this,param);jshop.module.imgShow.autoLayout.call(this,param);}});})(jQuery);
(function(b,a){jshop.module.shopAtten={};b.extend(jshop.module.shopAtten,{follow:function(i){var x=b.extend({coll:".jshop-btn-coll",node:"li",default_pop:".j_default"},i||{}),z=this,D="http://follow.soa.jd.com/vender/follow?venderId=",g=null,o=null,h=false,n=null,u,m,s;function q(){if(b(z).parents(".mc:first").find("#j-follow-cnt").length){n=b(z).parents(".mc:first").find("#j-follow-cnt");n.find(".icon_close").unbind("click").click(function(){A();});}}function F(){b(z).find(x.node+" "+x.coll).click(function(){s=b(this).attr("shopurl");if(n){n.find(".p1>a,.p3>a").attr("href",s);}G.call(this);});}function G(){g=b(this).attr("shopid");function H(){b.ajax({async:false,url:D+g,dataType:"jsonp",success:function(I){C(I);},error:function(){B(data);}});}b.login({modal:true,complete:function(I){if(I!=null&&I.IsAuthenticated!=null&&I.IsAuthenticated){jdModelCallCenter.settings.fn();jdModelCallCenter.settings.fn=null;}}});jdModelCallCenter.settings.fn=function(){H();};}function C(H){b('<link rel="stylesheet" type="text/css" href="http://misc.360buyimg.com/product/skin/2012/product-attention.css"/>').appendTo("head");o=b(z).parents(".mc:first").find(x.default_pop);r(H);}function r(H){switch(H.code){case"F10000":j();break;case"F0409":E();break;case"F0410":B("followMaxDiv",1);break;default:B("followFailDiv",2);}}function B(H,I){if(n){try{n.find(".p1,.p2,.p3").hide();if(I==1){n.find(".p3").show();}else{n.find(".p2").show();}y();}catch(J){f(H);}}else{f(H);}}function j(){c(function(){if(n){n.find(".p2,.p3").hide();n.find(".p1").show();y();}else{k();}});}function y(){l(n);p();b(".thickdiv").show();n.show();}function A(){n.hide();b(".thickdiv").hide();}function e(H,I){b(".thickbox").html("");b.jdThickBox({width:510,height:260,title:"关注店铺",_box:"btn_coll_shop_pop",source:H},function(){I();});}function k(){var H="http://follow.soa.jd.com/vender/queryTagForListByCount?count=5";b.ajax({async:false,url:H,dataType:"jsonp",success:function(I){d(I);}});}function d(L){var K=L.data,J='<ul id="oldTags" class="att-tag-list">';
for(var I=0,H=K.length;I<H;I++){J+='<li isnewadd="true"><a href="javascript:;" isCheck="false">'+decodeURIComponent(K[I])+"</a><li>";}J+='</ul><ul id="newTags" class="att-tag-list att-tag-list-save">';J+='<li id="att-tag-new" class="att-tag-new"><input id="newTag" type="text" placeholder="自定义" maxLength="10" /><span>保存</span></li></ul>';o.find("#followTags").html(J);e(o.find("#followSuccessDiv").html(),function(){var M=b("#btn_coll_shop_pop"),N=b("#attention-tags").find(".mc");M.find(".thickcon").css("height","auto");M.css("height","auto");b("#newTag").val(b("#newTag").attr("placeholder"));b("#newTag").focus(function(){if(b.trim(b(this).val())==b(this).attr("placeholder")){b(this).val("");}}).keyup(function(){b(this).val(b(this).val().substring(0,10));}).blur(function(){if(b(this).val()==""){}});b("#newTag").next("span").click(function(){w();});b("#oldTags li").click(function(){v(this);});b("#attention-tags .att-tag-btn>a:first").click(function(){var Q="",P=0;b("#oldTags,#newTags").find("a").each(function(R,S){if(b(S).attr("ischeck")=="true"){P++;if(Q!=""){Q+=",";}Q+=b(S).html();}});if(Q==""){t("请至少提供一个标签");}if(P>3){t("标签最多可选3个");}Q=encodeURIComponent(Q);var O="http://follow.soa.jd.com/vender/editTag";b.ajax({url:O,dataType:"jsonp",data:{venderId:g,tagNames:Q},success:function(R){if(R.code=="F10000"){b("#follow_error_msg").removeClass();b("#follow_error_msg").addClass("hl_green fl");b("#follow_error_msg").html("设置成功");b("#follow_error_msg").show();setTimeout(function(){b("#follow_error_msg").hide();b(".thickclose").click();},5000);}else{if(R.code=="F0410"){t("设置的标签数超过最大限制");}else{t("设置失败");}}},error:function(){t("设置失败");}});});});}function w(){var J=b("#newTag").val(),H="标签由数字、字母、汉字组成";function I(M){var L=/[\u4e00-\u9fa5]|[0-9]|[a-z]|[A-Z]+/g,K=M.match(L);return !!K;}if(J.length>10||J.trim().length>10){t(H);return false;}if(!I(J)){t(H);return false;}if(J==b("#newTag").attr("placeholder")){return false;}b('<li isNewAdd="true"><a class="current" href="javascript:;" isCheck="true">'+J+"</a></li>").click(function(){v(this);
}).insertBefore(b("#att-tag-new"));if(b("#newTags li[isNewAdd]").length>=3){b("#att-tag-new").hide();}b("#newTag").val("");}function v(I){var H=b(I).find("a").attr("isCheck");if("undefined"==typeof H||H=="false"){b(I).find("a").attr("isCheck","true");b(I).find("a").addClass("current");}else{b(I).find("a").attr("isCheck","false");b(I).find("a").removeClass("current");}}function t(H){b("#follow_error_msg").html(H);b("#follow_error_msg").show();if(u){clearTimeout(u);}u=setTimeout(function(){b("#follow_error_msg").hide();},3000);}function E(){if(n){n.find(".p1,.p2,.p3").hide();n.find(".p3").show();y();}else{c(function(){f("followedDiv","已关注过该店铺");});}}function c(I){var H="http://follow.soa.jd.com/vender/queryForCount";b.ajax({url:H,dataType:"jsonp",async:false,success:function(J){o.find("#followSuccessDiv #followedNum,#followedDiv #followedNum").html("您已关注"+J.data+"个店铺，");I();}});}function f(H,I){b(".thickbox").html("");b.jdThickBox({width:300,height:80,title:I||"关注失败",source:o.find("#"+H).html()});}function l(I){var J=I.outerWidth(),H=I.outerHeight();I.css({position:"absolute",left:(b(window).width()-J)/2+b(window).scrollLeft()+"px",top:(b(window).height()-H)/2+b(window).scrollTop()+"px",zIndex:10000005});}function p(){if(!b(".thickdiv").length){b('<div class="thickdiv"></div>').appendTo("body");}}q();F();}});})(jQuery,window);
(function(b,a){a.jshop.module.sidePanel=a.jshop.module.sidePanel||{};b.extend(a.jshop.module.sidePanel,{base:function(r){var l=b(this),g=b.extend({horizontal:1,top:0,show:false,animate:"normal"},r||{}),n=l.find(".J-container"),j=n.height(),e=609,m=false,i=1000,h=null,c;var q={normal:{show:function(){n.show();},hide:function(){n.hide();}},fade:{show:function(){n.fadeIn(i);},hide:function(){n.fadeOut(i);}},fadeH:{show:function(){n.animate({"height":g.height+"px"},i);},hide:function(){n.animate({"height":"0px"},i,function(){n.show();});}},fadeW:{show:function(){n.animate({"width":g.width+"px"},i);},hide:function(){n.animate({"width":"0px"},i,function(){n.show();});}}};function p(){if(l.parents("[instanceid]").data("panel")){l.parents("[instanceid]").data("panel").remove();}l.parents("[instanceid]").data("panel",n);c=q[g.animate]||q.normal;jshop.module.ridLazy(l);o();}function o(){if(1==g.horizontal){n.css({right:"50%",marginRight:"505px"});}else{if(2==g.horizontal){n.css({left:"50%",marginLeft:"505px"});}else{n.css({margin:"0 auto",maxWidth:"990px",left:"50%",marginLeft:-g.width/2+"px"});}}h=g.horizontal<3?g.top:(g.horizontal==4?2:b(window).height()-g.height-2);n.css({position:"fixed",zIndex:7,top:h+"px",overflow:"hidden"});if(g.height){n.height(g.height);}if(g.width){n.width(g.width);}if(g.show===1){if(b(window).scrollTop()<e){c.hide();}else{if(g.horizontal==4){if(b(window).scrollTop()>=176){n.show();}m=true;}else{n.show();m=true;}}f();}else{if(g.horizontal==4){c.hide();if(b(window).scrollTop()>=175){c.show();m=true;}b(window).scroll(function(){if(!m&&b(this).scrollTop()>=176){c.show();m=true;}if(m&&b(this).scrollTop()<176){c.hide();m=false;}});}else{c.hide();c.show();m=true;}}if(b.browser.msie&&b.browser.version.match(/6/)){n.css("position","absolute");k();}}function k(){b(window).scroll(function(){if(m){n.css("top",h+b(this).scrollTop()+"px");}});b(window).resize(function(){h=g.horizontal<3?g.top:(g.horizontal==4?2:b(window).height()-g.height-2);if(m){n.css("top",h+b(this).scrollTop()+"px");
}return;});}function f(){b(window).scroll(function(){if(!m&&b(this).scrollTop()>=e){c.show();m=true;}if(m&&b(this).scrollTop()<e){c.hide();m=false;}});}function d(){var s=(b("#service-2013").length?b("#service-2013").offset().top:b("body").height())-g.height-g.top;b(window).scroll(function(){if(b(this).scrollTop()>=s){n.css({top:s-b(this).scrollTop()+g.top+"px"});}else{n.css({top:g.top+"px"});}});}p();}});})(jQuery,window);
(function(b,a){a.jshop.module.Countdown=a.jshop.module.Countdown||{};b.extend(a.jshop.module.Countdown,{_timer:null,_sysTime:null,_countdownList:[],base:(function(){var d=null,e=null,c=null;return function(g){var l=b(this),h=b.extend({hasDay:true,dayCnt:"",hourCnt:"",minuteCnt:"",secondCnt:""},g||{}),f=null;function i(){if(!h.countDownInfo){return;}j();l.data("cutTime",f).data("arg",h).data("over",false);c=b('[module-name="Countdown"] .j-module').toArray();if(!d){a.getServerTime(function(m){var n=new Date()-m;if(!d){k();}});}}function j(){var p=h.countDownInfo,m=p.split(" "),o=m[0].split("-"),n=m[1].split(":");f=new Date(Number(o[0]),(Number(o[1])+11)%12,Number(o[2]),Number(n[0]),Number(n[1]),Number(n[2]));}function k(){d=setInterval(function(){for(var o=0,r=c.length;o<r;o++){var q=b(c[o]),n=q.data("cutTime"),v=q.data("arg"),s=parseInt((n-new Date()+e)/1000);if(s<0){c.splice(o,1);break;}var u=Math.floor(s/(24*3600)),m=Math.floor(s/3600)-(v.hasDay?u*24:0),t=Math.floor(s%3600/60),p=s%60;if(v.hasDay){q.find(v.dayCnt).html(u>9?u:"0"+u);}q.find(v.hourCnt).html(m>9?m:"0"+m);q.find(v.minuteCnt).html(t>9?t:"0"+t);q.find(v.secondCnt).html(p>9?p:"0"+p);}},1000);}i();};})()});a.getServerTime=function(d){var c="http://act.jshop.jd.com/serverTime.html";b.ajax({url:c,dataType:"jsonp",success:function(e){d(e.nowTime?new Date(e.nowTime):new Date());}});};})(jQuery,window);
